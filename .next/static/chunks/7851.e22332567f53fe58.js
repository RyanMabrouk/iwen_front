!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d22e2240-d392-4d8f-a819-bbe65c8cfe35",e._sentryDebugIdIdentifier="sentry-dbid-d22e2240-d392-4d8f-a819-bbe65c8cfe35")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7851],{85673:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(68756);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...f}=e;return(0,n.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:o("lucide",u),...f},[...d.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),l=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:l,...u}=r;return(0,n.createElement)(i,{ref:s,iconNode:t,className:o("lucide-".concat(a(e)),l),...u})});return r.displayName="".concat(e),r}},73956:function(e,t,r){r.d(t,{Z:function(){return n}});let n=(0,r(85673).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},97851:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var n,a=r(66281),o=r(68756),s=r(69278),i=r(85673);let l=(0,i.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var u=r(73956);let c=(0,i.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);for(var d=r(89691),f=r(64502),p={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},m=new Uint8Array(16),y=[],h=0;h<256;++h)y.push((h+256).toString(16).slice(1));var g=function(e,t,r){if(p.randomUUID&&!t&&!e)return p.randomUUID();var a=(e=e||{}).random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(m)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=a[o];return t}return function(e,t=0){return(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase()}(a)};r(73708);var v=(0,r(8552).$)("8bcde02c5e09fef278163ef6a6e4b5262a0a54d9"),w=r(45516),b=r(91311),x=r(50319);function k(e){let{defaultProfilePic:t}=e,[r,n]=(0,o.useState)(null!=t?t:"/default_avatar.png"),[i,p]=(0,o.useState)(!1),[m,y]=(0,o.useState)(!1),h=(0,d.useQueryClient)(),{toast:k}=(0,w.useToast)();(0,o.useEffect)(()=>{n(null!=t?t:"/default_avatar.png")},[t]);let C=(0,f.useMutation)({mutationFn:async e=>{y(!0);let t=(0,b.Z)({resource:"users",action:"updateMe"});try{let r=new FormData;r.append("filepicture",e);let n=await v({formData:r,name:"filepicture",title:g()}),{error:a,validationErrors:o}=await (0,x.Z)({method:"PATCH",url:t(),payload:{avatar:n}});if(a||o)throw Error("فشل تحديث الصورة الشخصية");return n}finally{y(!1)}},onSuccess:e=>{h.invalidateQueries({queryKey:["users","me"]}),n(e),p(!1),k.success("تم تحديث الصورة الشخصية بنجاح.")},onError:e=>{k.error("فشل تحديث الصورة الشخصية")}});return(0,a.jsxs)("div",{className:"relative inline-block",dir:"rtl","data-sentry-component":"ProfilePictureUpload","data-sentry-source-file":"profilepic.tsx",children:[(0,a.jsx)(s.default,{src:r||"/default_avatar.png",alt:"",width:500,height:500,className:"h-full w-20 rounded-full sm:w-28 md:w-[9rem]","data-sentry-element":"Image","data-sentry-source-file":"profilepic.tsx"}),(0,a.jsx)("label",{htmlFor:"profile-picture-upload",className:"absolute bottom-0 right-0 cursor-pointer rounded-full bg-white p-1 shadow-md",title:"تغيير الصورة الشخصية",children:(0,a.jsx)(l,{className:"h-4 w-4 text-gray-600","data-sentry-element":"Camera","data-sentry-source-file":"profilepic.tsx"})}),(0,a.jsx)("input",{id:"profile-picture-upload",type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(n(URL.createObjectURL(r)),p(!0))},className:"sr-only"}),i&&!m&&(0,a.jsx)("div",{className:"absolute inset-0 flex cursor-pointer items-center justify-center rounded-full bg-black bg-opacity-50",onClick:()=>{var e;if(!document)return;let t=document.querySelector("#profile-picture-upload"),r=null==t?void 0:null===(e=t.files)||void 0===e?void 0:e[0];r&&C.mutate(r)},title:"حفظ الصورة الجديدة",children:(0,a.jsx)(u.Z,{className:"h-8 w-8 text-white"})}),m&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black bg-opacity-50",children:(0,a.jsx)(c,{className:"h-6 w-6 animate-spin text-white"})})]})}},45516:function(e,t,r){r.r(t),r.d(t,{ToastContainer:function(){return u},ToastProvider:function(){return i},useToast:function(){return l}});var n=r(66281),a=r(68756),o=r(13955);o.ZP.config({top:100,duration:10,maxCount:3,rtl:!0,prefixCls:"my-message"});let s=(0,a.createContext)({});function i(e){let{children:t}=e,{toast:r,toastContainer:a}=function(){let[e,t]=o.ZP.useMessage(),r=(t,r,a)=>{e.open({type:t,content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"my-2 mr-1 text-[1.05rem] font-semibold",children:r}),(0,n.jsx)("span",{className:"my-2 ml-2 text-[1.05rem]",children:a})]})})};return{toast:{success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r("success",t,e)},error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r("error",t,e)},warning(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r("warning",t,e)},info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r("info",t,e)}},toastContainer:t}}();return(0,n.jsx)(s.Provider,{value:{toast:r,toastContainer:a},"data-sentry-element":"unknown","data-sentry-component":"ToastProvider","data-sentry-source-file":"useToast.tsx",children:t})}function l(){let{toast:e,toastContainer:t}=(0,a.useContext)(s);if(!e||!t)throw Error("useToast must be used within a ToastProvider");return{toast:e,toastContainer:t}}function u(){let{toastContainer:e}=(0,a.useContext)(s);return(0,n.jsx)(n.Fragment,{children:e})}}}]);