!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f0fb673b-867a-4766-9d3e-0e9d92a45eec",e._sentryDebugIdIdentifier="sentry-dbid-f0fb673b-867a-4766-9d3e-0e9d92a45eec")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2569],{53167:function(e,t,a){Promise.resolve().then(a.bind(a,42346))},42346:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(66281),n=a(68756),r=a(10374),l=a(64502),o=a(45516),u=a(64805);a(73708);var c=(0,a(8552).$)("e36547273da2d36983c2da1e3ace55f219bb6244"),i=a(42694);function d(){var e;let[t,a]=(0,n.useState)(["","","","","",""]),{counter:d,setCounter:m}=(0,i.C)(),f=null!==(e=(0,r.useSearchParams)().get("email"))&&void 0!==e?e:"",{mutate:x}=function(e){let{toast:t}=(0,o.useToast)();return(0,l.useMutation)({mutationFn:async()=>(0,u.Z)(null!=e?e:""),onSuccess:()=>{t.success("(OTP) تمت إعادة إرسال كلمة المرور لمرة واحدة بنجاح")},onError:e=>{try{let a=JSON.parse(e.message);Array.isArray(a)?a.forEach(e=>{e&&"object"==typeof e&&"message"in e&&t.error(e.message)}):t.error(e.message)}catch(a){t.error(e.message)}}})}(f),{mutate:p}=function(e,t){let{toast:a}=(0,o.useToast)(),s=(0,r.useRouter)();return(0,l.useMutation)({mutationFn:async()=>c(null!=e?e:"",t),onSuccess:()=>{a.success("تم التحقق من الرمز المميز بنجاح"),s.push("/change_password")},onError:e=>{try{let t=JSON.parse(e.message);Array.isArray(t)?t.forEach(e=>{e&&"object"==typeof e&&"message"in e&&a.error(e.message)}):a.error(e.message)}catch(t){a.error(e.message)}}})}(f,t.join(""));(0,n.useEffect)(()=>{6===t.join("").length&&p()},[t,p]);let g=[(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null)],h=(e,s)=>{if(/^[0-9]?$/.test(s)){let r=[...t];if(r[e]=s,a(r),s&&e<5){var n;null===(n=g[e+1].current)||void 0===n||n.focus()}}},y=(e,a)=>{var s,n,r;"Backspace"===a.key?!t[e]&&e>0&&(null===(s=g[e-1].current)||void 0===s||s.focus()):"ArrowLeft"===a.key&&e>0?(a.preventDefault(),null===(n=g[e-1].current)||void 0===n||n.focus()):"ArrowRight"===a.key&&e<5&&(a.preventDefault(),null===(r=g[e+1].current)||void 0===r||r.focus())},b=e=>{e.preventDefault();let t=e.clipboardData.getData("text").slice(0,6).replace(/\D/g,"");if(6===t.length){var s;a(t.split("").map(e=>e||"")),null===(s=g[5].current)||void 0===s||s.focus()}};return(0,s.jsxs)("div",{className:"flex flex-col items-end gap-3 max-md:gap-5 max-md:p-3","data-sentry-component":"Token","data-sentry-source-file":"Token.tsx",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold max-md:text-base",children:"نسخ رمز التحقق للمواصلة"}),(0,s.jsx)("h1",{className:"text-right text-xl max-md:text-base",children:": أدخل العدد المكون من 6 أرقام الذي أرسلناه إلى عنوان بريدك الإلكتروني"}),(0,s.jsx)("div",{className:"flex w-full items-center justify-end gap-2 max-md:justify-between max-md:gap-1",children:t.map((e,t)=>(0,s.jsxs)(n.Fragment,{children:[t>0&&(0,s.jsx)("span",{className:"text-xl max-md:hidden",children:"-"}),(0,s.jsx)("input",{ref:g[t],value:e,onChange:e=>h(t,e.target.value),onKeyDown:e=>y(t,e),onPaste:b,maxLength:1,placeholder:"-",type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"h-[5rem] w-[4rem] rounded-xl border text-center text-2xl text-teal-600 outline-none max-xl:h-[4rem] max-xl:w-[3rem] max-lg:h-[3rem] max-lg:w-[35px] ".concat(e?"border-teal-600":"border-gray-300")})]},t))}),(0,s.jsxs)("p",{className:"flex items-center gap-2 max-md:mt-10",children:[(0,s.jsx)("button",{onClick:()=>{0===d&&(x(),m(60),localStorage.setItem("otpCooldownEnd",(Date.now()+6e4).toString()))},disabled:d>0,className:"cursor-pointer text-nowrap text-xl font-semibold max-lg:text-base ".concat(d>0?"cursor-not-allowed opacity-50":""),children:d>0?"إعادة الإرسال (".concat(d,")"):"إعادة الإرسال الآن"}),(0,s.jsx)("span",{className:"text-nowrap",children:"لم تتلق الرمز ؟"})]})]})}var m=a(18594);function f(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(m.J5,{className:"m-auto",autoplay:!0,loop:!0,src:"/loading.json",style:{height:"12rem",width:"12rem"}}),"data-sentry-element":"Suspense","data-sentry-component":"page","data-sentry-source-file":"page.tsx",children:(0,s.jsx)(d,{"data-sentry-element":"Token","data-sentry-source-file":"page.tsx"})})}}},function(e){e.O(0,[2161,7182,1711,2830,4913,364,5768,1744],function(){return e(e.s=53167)}),_N_E=e.O()}]);