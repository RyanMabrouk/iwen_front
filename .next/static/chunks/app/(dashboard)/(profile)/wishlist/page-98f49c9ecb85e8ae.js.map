{"version":3,"file":"static/chunks/app/(dashboard)/(profile)/wishlist/page-98f49c9ecb85e8ae.js","mappings":"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","sources":["webpack://_N_E/?1c63","webpack://_N_E/./src/hooks/data/user/wishlist/wishlistQuery.ts","webpack://_N_E/./src/hooks/data/user/wishlist/useWishlist.ts","webpack://_N_E/./src/app/(dashboard)/(profile)/wishlist/ui/noWishlist.tsx","webpack://_N_E/./src/app/(dashboard)/(profile)/wishlist/ui/wishlist.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\", webpackExports: [\"default\"] */ \"/Users/macmini/Sites/iwan/iwen_front/src/app/(dashboard)/(profile)/wishlist/ui/wishlist.tsx\");\n","import createNewPathname from \"@/helpers/createNewPathname\";\nimport sendRequest from \"@/services/sendRequest\";\nimport getEndpoint from \"@/services/getEndpoint\";\nimport {\n  IBookPopulated,\n  InfinityPaginationQueryType,\n  InfinityPaginationResultType,\n} from \"@/types\";\nimport { Tables } from \"@/types/database.types\";\n\nconst wishlistQuery = (\n  args: InfinityPaginationQueryType<`wishlist.${keyof Tables<\"books\">}`>,\n) => ({\n  queryKey: [\"wishlist\", args],\n  queryFn: async () => {\n    const url = getEndpoint({ resource: \"wishlist\", action: \"getWishlist\" });\n    const searchParams = Object.keys(args).map((key) => ({\n      name: key,\n      value: JSON.stringify(args[key as keyof typeof args]),\n    }));\n    const newUrl = createNewPathname({\n      currentPathname: url(),\n      values: searchParams,\n    });\n    const { error, data } = await sendRequest<\n      InfinityPaginationResultType<IBookPopulated>\n    >({\n      method: \"GET\",\n      url: newUrl,\n    });\n\n    if (error) return { data: null, error: error };\n    else return { data, error: null };\n  },\n});\nexport { wishlistQuery };\n","\"use client\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { InfinityPaginationQueryType } from \"@/types\";\nimport { Tables } from \"@/types/database.types\";\nimport { wishlistQuery } from \"./wishlistQuery\";\nexport default function useWishlist(\n  args: InfinityPaginationQueryType<`wishlist.${keyof Tables<\"books\">}`>,\n) {\n  const query = useQuery(wishlistQuery(args));\n  return query;\n}\n","import Image from \"next/image\";\nimport Link from \"next/link\";\nimport React from \"react\";\nexport default function NoWishlist() {\n  return <div className=\"flex flex-col m-auto justify-center gap-2\" data-sentry-component=\"NoWishlist\" data-sentry-source-file=\"noWishlist.tsx\">\n      <div className=\"font-semibold text-center\">قائمة الرغبات </div>\n      <Image src={\"/profile/noBooks.png\"} alt=\"noPurchases\" width={500} height={500} className=\"mt-10 h-auto w-[30rem] m-auto\" data-sentry-element=\"Image\" data-sentry-source-file=\"noWishlist.tsx\" />\n      <div className=\"text-center\">لا يوجد كتب في قائمة الرغبات</div>\n      <Link href=\"/books\" className=\"text-center\" data-sentry-element=\"Link\" data-sentry-source-file=\"noWishlist.tsx\">\n      <button className=\"rounded-md m-auto mt-5 bg-color2 w-fit p-2 px-4 text-lg text-white opacity-100 hover:opacity-50\">\n        مواصلة التسوّق\n      </button>\n      </Link>\n\n    </div>;\n}","\"use client\";\n\nimport BookCard from \"@/components/BookCard\";\nimport useWishlist from \"@/hooks/data/user/wishlist/useWishlist\";\nimport { wishlistQuery } from \"@/hooks/data/user/wishlist/wishlistQuery\";\nimport { IBookPopulated } from \"@/types\";\nimport { Player } from \"@lottiefiles/react-lottie-player\";\nimport { Pagination } from \"@mui/material\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport React, { useEffect, useState } from \"react\";\nimport NoWishlist from \"./noWishlist\";\nexport default function Wishlist() {\n  const limit = 4;\n  const [page, setPage] = useState(1);\n  const {\n    data: wishlist,\n    isLoading\n  } = useWishlist({\n    page,\n    limit\n  });\n  const queryClient = useQueryClient();\n  useEffect(() => {\n    if (wishlist?.data?.meta?.has_next_page) {\n      queryClient.prefetchQuery(wishlistQuery({\n        page: page + 1,\n        limit\n      }));\n    }\n  }, [page, wishlist?.data?.meta?.has_next_page, queryClient]);\n  if (isLoading) {\n    return <Player className=\"m-auto\" autoplay loop src=\"/loading.json\" style={{\n      height: \"12rem\",\n      width: \"12rem\"\n    }} />;\n  }\n  if (wishlist?.data?.meta.total_count === 0) {\n    return <NoWishlist />;\n  }\n  return <div className=\"mx-auto sm:max-w-5xl\" dir=\"rtl\" data-sentry-component=\"Wishlist\" data-sentry-source-file=\"wishlist.tsx\">\n      <div className=\" grid grid-cols-1 sm:grid-cols-3 md:grid-cols-4\">\n        {wishlist?.data?.data.map((book: IBookPopulated) => {\n        return <div dir=\"ltr\" key={book.id} className=\"group flex h-full w-full items-center justify-center p-4\">\n              <BookCard {...book} writer={book.writer?.name || \"كاتب غير معروف\"} />\n            </div>;\n      })}\n      </div>\n      <div className=\"mt-8 flex justify-center\">\n        <Pagination className=\"flex w-full justify-center\" count={wishlist?.data?.meta?.total_pages ?? 1} page={page} boundaryCount={3} siblingCount={3} onChange={(e, value) => setPage(value)} dir=\"ltr\" data-sentry-element=\"Pagination\" data-sentry-source-file=\"wishlist.tsx\" />\n      </div>\n    </div>;\n}"],"names":["Promise","resolve","then","__webpack_require__","bind","wishlistQuery","queryKey","args","queryFn","url","getEndpoint","resource","action","searchParams","Object","keys","map","name","key","value","JSON","stringify","newUrl","createNewPathname","currentPathname","values","error","data","sendRequest","method","NoWishlist","jsx_runtime","jsxs","div","className","data-sentry-component","data-sentry-source-file","jsx","Image","src","alt","width","height","data-sentry-element","Link","href","button","Wishlist","wishlist","page","setPage","useState","isLoading","limit","useQuery","queryClient","useQueryClient","useEffect","meta","has_next_page","prefetchQuery","Player","autoplay","loop","style","total_count","dir","book","BookCard","writer","id","Pagination","count","total_pages","boundaryCount","siblingCount","onChange","e"],"sourceRoot":""}