!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d4ae84a4-574e-4e70-a961-162af55e14ee",e._sentryDebugIdIdentifier="sentry-dbid-d4ae84a4-574e-4e70-a961-162af55e14ee")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8468],{7032:function(e,t,a){Promise.resolve().then(a.bind(a,82401))},82401:function(e,t,a){"use strict";a.d(t,{default:function(){return _}});var r=a(66281),l=a(68756),s=a(22151),n=a(51956),o=a(13285),d=a(54548),i=a(68651),u=a(47960),c=a(89691),m=a(64502),f=a(91311),v=a(45516),y=a(3312),p=a(50319),h=a(15177),g=a(47293),x=a(33202);let b=h.z.string().regex(/^0\d{9}$/,"رقم الهاتف يجب أن يبدأ ب0 ويحتوي على 10 أرقام");function _(){var e,t,a,_,j,w,Z,N,S,F;let I=(0,c.useQueryClient)(),{data:E}=(0,u.Z)(),{toast:q}=(0,v.useToast)(),[C,V]=(0,l.useState)(""),[k,D]=(0,l.useState)(""),[P,M]=(0,l.useState)();(0,l.useEffect)(()=>{var e;(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.state)&&V(E.data.state)},[null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.state]),(0,l.useEffect)(()=>{var e;(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.city)&&D(E.data.city)},[null==E?void 0:null===(t=E.data)||void 0===t?void 0:t.city]);let T=(0,m.useMutation)({mutationFn:async e=>{let t=String(e.get("first_name")),a=String(e.get("last_name")),r=String(e.get("phone_number")),l=String(e.get("postalCode")),s=String(e.get("address1")),n=String(e.get("address2")),o=(0,f.Z)({resource:"users",action:"updateMe"});try{b.parse(r)}catch(e){if(e instanceof h.z.ZodError){var d;throw Error(null===(d=e.errors[0])||void 0===d?void 0:d.message)}throw Error("")}let{error:i,validationErrors:u}=await (0,p.Z)({method:"PATCH",url:o(),payload:{first_name:t,last_name:a,phone_number:r,postal_code:l,street:s,street2:null!=n?n:"لا يوجد",country:"Morocco",state:C,city:k}});if(i)throw M(u),Error("")},onSuccess:()=>{I.invalidateQueries({queryKey:["users","me"]}),M(null),q.success("تم تحديث الملف الشخصي بنجاح")},onError:e=>{q.error(e.message||"حدث خطأ أثناء تحديث الملف الشخصي")}});return(0,r.jsx)("form",{dir:"rtl",className:"bg-white",onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget);T.mutate(t)},"data-sentry-component":"Form","data-sentry-source-file":"form.tsx",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)(g.Z,{errors:null==P?void 0:P.first_name,label:"الإسم",name:"first_name",placeholder:"صدقي",defaultValue:null==E?void 0:null===(a=E.data)||void 0===a?void 0:a.first_name,required:!0,icon:(0,r.jsx)(s.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.last_name,label:"اللقب",name:"last_name",placeholder:"تليجة",defaultValue:null==E?void 0:null===(_=E.data)||void 0===_?void 0:_.last_name,required:!0,icon:(0,r.jsx)(s.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.email,label:"البريد الإلكتروني",name:"email",type:"email",placeholder:"sedki_tilja@gmail.com",defaultValue:null==E?void 0:null===(j=E.data)||void 0===j?void 0:j.email,required:!0,disabled:!0,icon:(0,r.jsx)(n.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.phone_number,label:"رقم الهاتف",name:"phone_number",type:"number",placeholder:"004 47 18 74",defaultValue:null==E?void 0:null===(w=E.data)||void 0===w?void 0:w.phone_number,required:!0,icon:(0,r.jsx)(o.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(x.Z,{errors:null==P?void 0:P.state,label:"الولاية",name:"state",placeholder:"اختر الولاية",options:y.a.map(e=>e.state),value:C,required:!0,onChange:e=>{e&&V(e)},"data-sentry-element":"FormSelect","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(x.Z,{errors:null==P?void 0:P.city,label:"المدينة",name:"city",placeholder:"اختر المدينة",options:(null===(Z=y.a.find(e=>e.state===C))||void 0===Z?void 0:Z.cities)||[],value:k,required:!0,onChange:e=>{e&&D(e)},disabled:!C,"data-sentry-element":"FormSelect","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.postal_code,label:"الرقم البريدي",name:"postalCode",placeholder:"10004",defaultValue:null==E?void 0:null===(N=E.data)||void 0===N?void 0:N.postal_code,required:!0,icon:(0,r.jsx)(d.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.street,label:"عنوان السكن - 1",name:"address1",placeholder:"شارع المهدي بن سلامة",defaultValue:null==E?void 0:null===(S=E.data)||void 0===S?void 0:S.street,required:!0,icon:(0,r.jsx)(i.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)(g.Z,{errors:null==P?void 0:P.street2,label:"عنوان السكن - 2 (اختياري)",name:"address2",placeholder:"شارع المتنبي",defaultValue:null==E?void 0:null===(F=E.data)||void 0===F?void 0:F.street2,icon:(0,r.jsx)(i.Z,{className:"h-4 w-4"}),"data-sentry-element":"FormInput","data-sentry-source-file":"form.tsx"}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"",children:(0,r.jsx)("button",{type:"submit",disabled:T.isPending,className:"rounded-md bg-color2 p-2 px-4 text-lg text-white opacity-100 hover:opacity-50",children:T.isPending?"جاري التحديث...":"احفظ التغيير"})})]})})}}},function(e){e.O(0,[7182,797,3435,1711,1186,5657,8647,4913,364,5768,1744],function(){return e(e.s=7032)}),_N_E=e.O()}]);