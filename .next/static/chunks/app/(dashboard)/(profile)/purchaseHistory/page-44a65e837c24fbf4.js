!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="04a85d59-ded6-4d40-9443-abc3b8c086e8",e._sentryDebugIdIdentifier="sentry-dbid-04a85d59-ded6-4d40-9443-abc3b8c086e8")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6176],{85729:function(e,t,s){Promise.resolve().then(s.bind(s,79714))},79714:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var a=s(66281),r=s(60427),n=s(2141),o=s(89691),c=s(68756),d=s(33031);let l=c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let i=c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let u=c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});u.displayName="CardTitle",c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let m=c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",s),...r})});m.displayName="CardContent";let f=c.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",s),...r})});f.displayName="CardFooter";var g=s(16681),x=s(10513),p=s(18234),h=s(69278),y=s(9281);function b(){return(0,a.jsxs)("div",{className:"m-auto flex flex-col justify-center gap-2","data-sentry-component":"NoPurchases","data-sentry-source-file":"noPurchases.tsx",children:[(0,a.jsx)("div",{className:"text-center font-semibold",children:"تاريخ المشتريات"}),(0,a.jsx)(h.default,{src:"/profile/noPurchases.png",alt:"noPurchases",width:500,height:500,className:"m-auto mt-10 h-auto w-[30rem]","data-sentry-element":"Image","data-sentry-source-file":"noPurchases.tsx"}),(0,a.jsx)("div",{className:"text-center",children:"لا يوجد فواتير , لم يتم إجراء أي عمليات شراء حتى الآن"}),(0,a.jsx)(y.default,{href:"/books",className:"text-center","data-sentry-element":"Link","data-sentry-source-file":"noPurchases.tsx",children:(0,a.jsx)("button",{className:"m-auto mt-5 w-fit rounded-md bg-color2 p-2 px-4 text-lg text-white opacity-100 hover:opacity-50",children:"مواصلة التسوّق"})})]})}var v=s(18594);function N(){var e,t,s,d,y,N;let[j,w]=(0,c.useState)(1),{data:C,isLoading:_}=(0,n.Z)({limit:3,page:j}),k=(0,o.useQueryClient)();(0,c.useEffect)(()=>{var e,t;(null==C?void 0:null===(t=C.data)||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.has_next_page)&&k.prefetchQuery((0,r.z)({page:j+1,limit:3}))},[j,null==C?void 0:null===(t=C.data)||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.has_next_page,k]);let P=e=>new Date(e).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric"}),Z=e=>{switch(e){case"paid":return"bg-green-500";case"pending":return"bg-yellow-500";case"canceled":return"bg-red-500";default:return"bg-gray-500"}};return _?(0,a.jsx)(v.J5,{className:"m-auto",autoplay:!0,loop:!0,src:"/loading.json",style:{height:"12rem",width:"12rem"}}):(null==C?void 0:null===(s=C.data)||void 0===s?void 0:s.meta.total_count)===0?(0,a.jsx)(b,{}):(0,a.jsxs)("div",{className:"mx-auto",dir:"rtl","data-sentry-component":"Orders","data-sentry-source-file":"orders.tsx",children:[(0,a.jsx)("h1",{className:"mb-8 text-right text-3xl font-bold text-color1",children:"طلباتي"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:null==C?void 0:null===(d=C.data)||void 0===d?void 0:d.data.map(e=>(0,a.jsxs)(l,{className:"overflow-hidden",children:[(0,a.jsx)(i,{className:"bg-muted",children:(0,a.jsxs)(u,{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-xl sm:text-2xl",children:["طلب #",e.id.slice(-5)]}),(0,a.jsx)("div",{className:"".concat(Z(e.status)," w-fit rounded-xl p-2 text-sm font-normal text-white sm:text-base"),children:"paid"===e.status?"مدفوع":"pending"===e.status?"قيد الانتظار":"ملغى"})]})}),(0,a.jsx)(m,{className:"pt-6",children:(0,a.jsxs)("div",{className:"space-y-4 text-right",children:[" ",(0,a.jsxs)("p",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[" ",(0,a.jsx)("span",{className:"font-semibold",children:"التاريخ:"})," ",P(e.created_at)]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"font-semibold",children:"الإجمالي:"})," ",e.total_price.toFixed(2)," د.م"]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"font-semibold",children:"تكلفة التوصيل:"})," ",e.delivery_price.toFixed(2)," د.م"]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{className:"font-semibold",children:"طريقة الدفع:"}),"onDelivery"===e.payment_method?"عند التسليم":"online"===e.payment_method?"عبر الإنترنت":"تحويل بنكي"]})]})}),(0,a.jsx)(f,{className:"mt-4 bg-muted",children:(0,a.jsxs)(p.Vq,{children:[(0,a.jsx)(p.hg,{className:"m-auto",children:(0,a.jsxs)("button",{className:"m-auto mt-[-1rem] flex items-center rounded-sm bg-white px-4 py-2 shadow-lg hover:opacity-50",children:[(0,a.jsx)(g.Z,{className:"ml-2 h-4 w-4"})," عرض تفاصيل الطلب"]})}),(0,a.jsx)(p.cZ,{dir:"rtl",className:"sm:h-[30rem]",children:(0,a.jsxs)("div",{className:"p-4 text-right",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-color1",children:"تفاصيل الطلب"}),(0,a.jsx)("div",{className:"mt-4 space-y-4",style:{maxHeight:"calc(5 * 4rem)",overflowY:"auto"},children:e.products.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(h.default,{src:null!==(t=e.images_urls[0])&&void 0!==t?t:"/empty-book.svg",alt:e.title,width:500,height:500,className:"h-16 w-16 rounded-md object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:e.quantity}),(0,a.jsx)("span",{children:"‎x‎"}),(0,a.jsx)("span",{children:e.price_after_discount}),"د.م"]})]})]},e.id)})})]})})]})})]},e.id))}),(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)(x.Z,{className:"flex w-full justify-center",count:(null==C?void 0:null===(N=C.data)||void 0===N?void 0:null===(y=N.meta)||void 0===y?void 0:y.total_pages)||1,page:j,boundaryCount:3,siblingCount:3,onChange:(e,t)=>w(t),dir:"ltr","data-sentry-element":"Pagination","data-sentry-source-file":"orders.tsx"})})]})}},18234:function(e,t,s){"use strict";s.d(t,{Vq:function(){return d},cZ:function(){return m},hg:function(){return l}});var a=s(66281),r=s(68756),n=s(28086),o=s(42031),c=s(33031);let d=n.fC,l=n.xz,i=n.h_;n.x8;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(i,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})}).displayName=n.Dx.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",s),...r})}).displayName=n.dk.displayName},835:function(e,t,s){"use strict";function a(e){let{currentPathname:t,values:s}=e,a=new URLSearchParams;return s.forEach(e=>{let{name:t,value:s}=e;a.set(t,s)}),t+"?"+a.toString()}s.d(t,{Z:function(){return a}})},60427:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var a=s(835),r=s(50319),n=s(91311);let o=e=>({queryKey:["orders",e],queryFn:async()=>{let t=(0,n.Z)({resource:"orders",action:"getMyOrders"}),s=Object.keys(e).map(t=>({name:t,value:JSON.stringify(e[t])})),o=(0,a.Z)({currentPathname:t(),values:s}),{error:c,data:d}=await (0,r.Z)({method:"GET",url:o});return c?{data:null,error:c}:{data:d,error:null}}})},2141:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(797),r=s(60427);function n(e){return(0,a.useQuery)((0,r.z)(e))}},33031:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(44157),r=s(93007);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},91311:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let a={users:{getUsers:()=>"/users",updateUser:e=>"/users/".concat(e),getUser:e=>"/users/".concat(e),getMe:()=>"/users/me",updateMe:()=>"/users/me"},books:{getBookId:e=>"/books/".concat(e),getBooks:()=>"/books",updateBook:e=>"/books/".concat(e),createBook:()=>"/books",deleteBook:e=>"/books/".concat(e),addCategory:(e,t)=>"/books/".concat(e,"/categories/").concat(t),addSubCategory:(e,t)=>"/books/".concat(e,"/subcategories/").concat(t),removeCategory:(e,t)=>"/books/".concat(e,"/categories/").concat(t),removeSubCategory:(e,t)=>"/books/".concat(e,"/subcategories/").concat(t)},categories:{getCategories:()=>"/Categories",updateCategory:e=>"/Categories/".concat(e),createCategory:()=>"/Categories",deleteCategory:e=>"/Categories/".concat(e)},cover_types:{getCoverTypes:()=>"/cover_types",updateCoverType:e=>"/cover_types/".concat(e),createCoverType:()=>"/cover_types",deleteCoverType:e=>"/cover_types/".concat(e)},publish_houses:{getPublishHouses:()=>"/share_houses",updatePublishHouse:e=>"/share_houses/".concat(e),createPublishHouse:()=>"/share_houses",deletePublishHouse:e=>"/share_houses/".concat(e)},subcategories:{getSubCategories:()=>"/subcategories",updateSubCategory:e=>"/subcategories/".concat(e),createSubCategory:()=>"/subCategories",deleteSubCategory:e=>"/subcategories/".concat(e)},writers:{getWriters:()=>"/writers",updateWriter:e=>"/writers/".concat(e),createWriter:()=>"/writers",deleteWriter:e=>"/writers/".concat(e)},corners:{getCorners:()=>"/corners",updateCorner:e=>"/corners/".concat(e),createCorner:()=>"/corners",deleteCorner:e=>"/corners/".concat(e)},orders:{getMyOrders:()=>"/orders/me",getOrderId:e=>"/orders/".concat(e),getOrders:()=>"/orders",updateOrder:e=>"/orders/".concat(e),createOrder:()=>"/orders",deleteOrder:e=>"/orders/".concat(e)},events:{getEvents:()=>"/events",updateEvent:e=>"/events/".concat(e),createEvent:()=>"/events",deleteEvent:e=>"/events/".concat(e),getEventById:e=>"/events/".concat(e)},banners:{getBanners:()=>"/banners",updateBanner:e=>"/banners/".concat(e),createBanner:()=>"/banners",deleteBanner:e=>"/banners/".concat(e)},wishlist:{getWishlist:()=>"/wishlist/me",createWishlist:()=>"/wishlist",deleteWishlist:e=>"/wishlist/".concat(e)}};function r(e){let{resource:t,action:s}=e;return a[t][s]}},50319:function(e,t,s){"use strict";s(73708);var a=s(8552);t.Z=(0,a.$)("4cff84bc16a182ce9e639f8d1157bd16e56a5a1f")}},function(e){e.O(0,[2161,9278,797,9281,3435,1186,513,7990,4913,364,5768,1744],function(){return e(e.s=85729)}),_N_E=e.O()}]);