"use strict";!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5f21bd66-ba99-4026-ac09-30c5a64325bf",e._sentryDebugIdIdentifier="sentry-dbid-5f21bd66-ba99-4026-ac09-30c5a64325bf")}catch(e){}}(),exports.id=4517,exports.ids=[4517],exports.modules={66020:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(91459).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},94517:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var a=r(31403),l=r(39307),n=r(18967),s=r(91459);let i=(0,s.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var o=r(66020);let c=(0,s.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=r(64247),d=r(92305),f=r(6005),p=r.n(f);let m={randomUUID:p().randomUUID},y=new Uint8Array(256),h=y.length,b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));let g=function(e,t,r){if(m.randomUUID&&!t&&!e)return m.randomUUID();let a=(e=e||{}).random||(e.rng||function(){return h>y.length-16&&(p().randomFillSync(y),h=0),y.slice(h,h+=16)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase()}(a)};r(53001);var w=(0,r(41228).$)("8bcde02c5e09fef278163ef6a6e4b5262a0a54d9"),x=r(51877),v=r(54406),j=r(54988);function U({defaultProfilePic:e}){let[t,r]=(0,l.useState)(e??"/default_avatar.png"),[s,f]=(0,l.useState)(!1),[p,m]=(0,l.useState)(!1),y=(0,u.useQueryClient)(),{toast:h}=(0,x.useToast)(),b=(0,d.useMutation)({mutationFn:async e=>{m(!0);let t=(0,v.Z)({resource:"users",action:"updateMe"});try{let r=new FormData;r.append("filepicture",e);let a=await w({formData:r,name:"filepicture",title:g()}),{error:l,validationErrors:n}=await (0,j.Z)({method:"PATCH",url:t(),payload:{avatar:a}});if(l||n)throw Error("فشل تحديث الصورة الشخصية");return a}finally{m(!1)}},onSuccess:e=>{y.invalidateQueries({queryKey:["users","me"]}),r(e),f(!1),h.success("تم تحديث الصورة الشخصية بنجاح.")},onError:e=>{h.error(`فشل تحديث الصورة الشخصية`)}});return(0,a.jsxs)("div",{className:"relative inline-block",dir:"rtl","data-sentry-component":"ProfilePictureUpload","data-sentry-source-file":"profilepic.tsx",children:[a.jsx(n.default,{src:t||"/default_avatar.png",alt:"",width:500,height:500,className:"h-full w-20 rounded-full sm:w-28 md:w-[9rem]","data-sentry-element":"Image","data-sentry-source-file":"profilepic.tsx"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"absolute bottom-0 right-0 cursor-pointer rounded-full bg-white p-1 shadow-md",title:"تغيير الصورة الشخصية",children:a.jsx(i,{className:"h-4 w-4 text-gray-600","data-sentry-element":"Camera","data-sentry-source-file":"profilepic.tsx"})}),a.jsx("input",{id:"profile-picture-upload",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&(r(URL.createObjectURL(t)),f(!0))},className:"sr-only"}),s&&!p&&a.jsx("div",{className:"absolute inset-0 flex cursor-pointer items-center justify-center rounded-full bg-black bg-opacity-50",onClick:()=>{if(!document)return;let e=document.querySelector("#profile-picture-upload"),t=e?.files?.[0];t&&b.mutate(t)},title:"حفظ الصورة الجديدة",children:a.jsx(o.Z,{className:"h-8 w-8 text-white"})}),p&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black bg-opacity-50",children:a.jsx(c,{className:"h-6 w-6 animate-spin text-white"})})]})}}};
//# sourceMappingURL=4517.js.map